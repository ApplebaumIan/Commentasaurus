<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# handlers

```go
import "github.com/nickrucinski/cloverapi/internal/handlers"
```

handlers/storage.go

## Index

- [func AnonymousAuthHandler\(c \*gin.Context\)](<#AnonymousAuthHandler>)
- [func CheckAndRegisterUser\(c \*gin.Context\)](<#CheckAndRegisterUser>)
- [func CreateClass\(c \*gin.Context\)](<#CreateClass>)
- [func DeleteClass\(c \*gin.Context\)](<#DeleteClass>)
- [func DeleteUser\(c \*gin.Context\)](<#DeleteUser>)
- [func ExportAllData\(c \*gin.Context\)](<#ExportAllData>)
- [func GetAClass\(c \*gin.Context\)](<#GetAClass>)
- [func GetAIUsage\(c \*gin.Context\)](<#GetAIUsage>)
- [func GetAllClasses\(c \*gin.Context\)](<#GetAllClasses>)
- [func GetAllErrorsHandler\(c \*gin.Context\)](<#GetAllErrorsHandler>)
- [func GetAllLogs\(c \*gin.Context\)](<#GetAllLogs>)
- [func GetClassesByInstructor\(c \*gin.Context\)](<#GetClassesByInstructor>)
- [func GetClassesByStudent\(c \*gin.Context\)](<#GetClassesByStudent>)
- [func GetLogsByClassID\(c \*gin.Context\)](<#GetLogsByClassID>)
- [func GetLogsByUserID\(c \*gin.Context\)](<#GetLogsByUserID>)
- [func GetSuggestionByModeAndId\(c \*gin.Context\)](<#GetSuggestionByModeAndId>)
- [func GetUser\(c \*gin.Context\)](<#GetUser>)
- [func GetUserSuggestionLogsByMode\(c \*gin.Context\)](<#GetUserSuggestionLogsByMode>)
- [func GetUsers\(c \*gin.Context\)](<#GetUsers>)
- [func HandleImageDelete\(c \*gin.Context\)](<#HandleImageDelete>)
- [func HandleImageUpload\(c \*gin.Context\)](<#HandleImageUpload>)
- [func HandleLogin\(c \*gin.Context\)](<#HandleLogin>)
- [func HandleLogsForInstructor\(c \*gin.Context\)](<#HandleLogsForInstructor>)
- [func HandleSignUp\(c \*gin.Context\)](<#HandleSignUp>)
- [func HandleSuggestion\(c \*gin.Context\)](<#HandleSuggestion>)
- [func HandleUpdateUserSettings\(c \*gin.Context\)](<#HandleUpdateUserSettings>)
- [func InitStorageService\(\)](<#InitStorageService>)
- [func LogSuggestionEvent\(c \*gin.Context\)](<#LogSuggestionEvent>)
- [func LogUserEvent\(c \*gin.Context\)](<#LogUserEvent>)
- [func LogUserTyping\(c \*gin.Context\)](<#LogUserTyping>)
- [func NotImplementedHandler\(c \*gin.Context\)](<#NotImplementedHandler>)
- [func ProviderHandler\(c \*gin.Context\)](<#ProviderHandler>)
- [func RegisterClass\(c \*gin.Context\)](<#RegisterClass>)
- [func UnregisterClass\(c \*gin.Context\)](<#UnregisterClass>)
- [func UpdateClass\(c \*gin.Context\)](<#UpdateClass>)
- [func UpdateClassStudentsSettings\(c \*gin.Context\)](<#UpdateClassStudentsSettings>)
- [func UpdateEnrollmentStatus\(c \*gin.Context\)](<#UpdateEnrollmentStatus>)
- [func UpdatePassword\(c \*gin.Context\)](<#UpdatePassword>)
- [func UpdateUser\(c \*gin.Context\)](<#UpdateUser>)
- [func UpdateUserStatus\(c \*gin.Context\)](<#UpdateUserStatus>)
- [type AIStat](<#AIStat>)
- [type AnonymousRequest](<#AnonymousRequest>)
- [type CheckUserRequest](<#CheckUserRequest>)
- [type ImageUploadResponse](<#ImageUploadResponse>)
- [type LogUserTypingStatsRequest](<#LogUserTypingStatsRequest>)
- [type RegisterClassRequest](<#RegisterClassRequest>)
- [type StorageService](<#StorageService>)
  - [func GetStorageService\(\) \*StorageService](<#GetStorageService>)
  - [func \(s \*StorageService\) CreateBucket\(ctx context.Context\) error](<#StorageService.CreateBucket>)
  - [func \(s \*StorageService\) DeleteImage\(ctx context.Context, imagePath string\) error](<#StorageService.DeleteImage>)
  - [func \(s \*StorageService\) UploadImage\(ctx context.Context, file multipart.File, header \*multipart.FileHeader, userID string\) \(\*ImageUploadResponse, error\)](<#StorageService.UploadImage>)
- [type SuggestionRequest](<#SuggestionRequest>)
- [type SupabaseErrorResponse](<#SupabaseErrorResponse>)
- [type SupabaseStorageResponse](<#SupabaseStorageResponse>)
- [type UpdateStudentsSettingsRequest](<#UpdateStudentsSettingsRequest>)


<a name="AnonymousAuthHandler"></a>
## func [AnonymousAuthHandler](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/auth_handler.go#L89>)

```go
func AnonymousAuthHandler(c *gin.Context)
```



<a name="CheckAndRegisterUser"></a>
## func [CheckAndRegisterUser](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/auth_handler.go#L141>)

```go
func CheckAndRegisterUser(c *gin.Context)
```



<a name="CreateClass"></a>
## func [CreateClass](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L228>)

```go
func CreateClass(c *gin.Context)
```



<a name="DeleteClass"></a>
## func [DeleteClass](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L270>)

```go
func DeleteClass(c *gin.Context)
```



<a name="DeleteUser"></a>
## func [DeleteUser](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/user_handler.go#L252>)

```go
func DeleteUser(c *gin.Context)
```

DeleteUser godoc @Summary Delete a user by ID @Description Deletes a user and their associated data based on the user ID. @Tags Users @Param user\_id path string true "User ID" @Success 200 \{object\} map\[string\]string "message": "User deleted successfully", "user\_id": "string" @Router /api/v1/users/\{user\_id\} \[delete\]

<a name="ExportAllData"></a>
## func [ExportAllData](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/data_handler.go#L12>)

```go
func ExportAllData(c *gin.Context)
```



<a name="GetAClass"></a>
## func [GetAClass](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L201>)

```go
func GetAClass(c *gin.Context)
```



<a name="GetAIUsage"></a>
## func [GetAIUsage](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/status_handler.go#L25>)

```go
func GetAIUsage(c *gin.Context)
```



<a name="GetAllClasses"></a>
## func [GetAllClasses](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L177>)

```go
func GetAllClasses(c *gin.Context)
```



<a name="GetAllErrorsHandler"></a>
## func [GetAllErrorsHandler](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/logger_handler.go#L18>)

```go
func GetAllErrorsHandler(c *gin.Context)
```

@Summary GetAllErrorsHandler retrieves all logged errors @Description Fetches all error logs from the database @Tags Logger @Accept json @Produce json @Success 200 \{array\} logger.API\_Error "List of error logs" @Failure 500 \{object\} map\[string\]string "error" @Router /api/v1/logger/ \[get\]

<a name="GetAllLogs"></a>
## func [GetAllLogs](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/log_handler.go#L147>)

```go
func GetAllLogs(c *gin.Context)
```



<a name="GetClassesByInstructor"></a>
## func [GetClassesByInstructor](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L18>)

```go
func GetClassesByInstructor(c *gin.Context)
```



<a name="GetClassesByStudent"></a>
## func [GetClassesByStudent](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/user_handler.go#L145>)

```go
func GetClassesByStudent(c *gin.Context)
```



<a name="GetLogsByClassID"></a>
## func [GetLogsByClassID](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/log_handler.go#L278>)

```go
func GetLogsByClassID(c *gin.Context)
```



<a name="GetLogsByUserID"></a>
## func [GetLogsByUserID](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/log_handler.go#L211>)

```go
func GetLogsByUserID(c *gin.Context)
```



<a name="GetSuggestionByModeAndId"></a>
## func [GetSuggestionByModeAndId](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/suggestion_handler.go#L12>)

```go
func GetSuggestionByModeAndId(c *gin.Context)
```



<a name="GetUser"></a>
## func [GetUser](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/user_handler.go#L66>)

```go
func GetUser(c *gin.Context)
```

GetUser godoc @Summary Get a user by ID @Description Retrieves user details based on the user ID. @Tags Users @Param user\_id path string true "User ID" @Success 200 \{object\} models.User @Router /api/v1/users/\{user\_id\} \[get\]

<a name="GetUserSuggestionLogsByMode"></a>
## func [GetUserSuggestionLogsByMode](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/log_handler.go#L101>)

```go
func GetUserSuggestionLogsByMode(c *gin.Context)
```



<a name="GetUsers"></a>
## func [GetUsers](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/user_handler.go#L27>)

```go
func GetUsers(c *gin.Context)
```

GetUsers godoc @Summary Get all users @Description Retrieves all user's details. @Tags Users @Success 200 \{array\} models.User @Router /api/v1/users/ \[get\]

<a name="HandleImageDelete"></a>
## func [HandleImageDelete](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/storage_handler.go#L281>)

```go
func HandleImageDelete(c *gin.Context)
```

HandleImageDelete handles the image deletion endpoint HandleImageDelete handles the image deletion endpoint

<a name="HandleImageUpload"></a>
## func [HandleImageUpload](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/storage_handler.go#L230>)

```go
func HandleImageUpload(c *gin.Context)
```

HandleImageUpload handles the image upload endpoint with debug logging

<a name="HandleLogin"></a>
## func [HandleLogin](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/auth_handler.go#L21>)

```go
func HandleLogin(c *gin.Context)
```



<a name="HandleLogsForInstructor"></a>
## func [HandleLogsForInstructor](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/log_handler.go#L334>)

```go
func HandleLogsForInstructor(c *gin.Context)
```



<a name="HandleSignUp"></a>
## func [HandleSignUp](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/auth_handler.go#L41>)

```go
func HandleSignUp(c *gin.Context)
```



<a name="HandleSuggestion"></a>
## func [HandleSuggestion](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/ai_handler.go#L23>)

```go
func HandleSuggestion(c *gin.Context)
```



<a name="HandleUpdateUserSettings"></a>
## func [HandleUpdateUserSettings](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/user_handler.go#L476>)

```go
func HandleUpdateUserSettings(c *gin.Context)
```



<a name="InitStorageService"></a>
## func [InitStorageService](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/storage_handler.go#L45>)

```go
func InitStorageService()
```



<a name="LogSuggestionEvent"></a>
## func [LogSuggestionEvent](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/log_handler.go#L36>)

```go
func LogSuggestionEvent(c *gin.Context)
```



<a name="LogUserEvent"></a>
## func [LogUserEvent](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/log_handler.go#L16>)

```go
func LogUserEvent(c *gin.Context)
```



<a name="LogUserTyping"></a>
## func [LogUserTyping](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/log_handler.go#L300>)

```go
func LogUserTyping(c *gin.Context)
```



<a name="NotImplementedHandler"></a>
## func [NotImplementedHandler](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/auth_handler.go#L16>)

```go
func NotImplementedHandler(c *gin.Context)
```



<a name="ProviderHandler"></a>
## func [ProviderHandler](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/auth_handler.go#L67>)

```go
func ProviderHandler(c *gin.Context)
```



<a name="RegisterClass"></a>
## func [RegisterClass](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L298>)

```go
func RegisterClass(c *gin.Context)
```



<a name="UnregisterClass"></a>
## func [UnregisterClass](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L423>)

```go
func UnregisterClass(c *gin.Context)
```



<a name="UpdateClass"></a>
## func [UpdateClass](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L247>)

```go
func UpdateClass(c *gin.Context)
```



<a name="UpdateClassStudentsSettings"></a>
## func [UpdateClassStudentsSettings](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L321>)

```go
func UpdateClassStudentsSettings(c *gin.Context)
```



<a name="UpdateEnrollmentStatus"></a>
## func [UpdateEnrollmentStatus](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L377>)

```go
func UpdateEnrollmentStatus(c *gin.Context)
```



<a name="UpdatePassword"></a>
## func [UpdatePassword](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/user_handler.go#L501>)

```go
func UpdatePassword(c *gin.Context)
```



<a name="UpdateUser"></a>
## func [UpdateUser](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/user_handler.go#L295>)

```go
func UpdateUser(c *gin.Context)
```



<a name="UpdateUserStatus"></a>
## func [UpdateUserStatus](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/user_handler.go#L109>)

```go
func UpdateUserStatus(c *gin.Context)
```

@Summary Update user status @Description Updates the status of a user based on the user ID. @Tags Users @Accept json @Produce json @Param user\_id path string true "User ID" @Param request body models.UserStatus true "User Status Update Request" @Success 200 \{object\} map\[string\]string "message: User status updated, user: \<user\_id\>" @Failure 400 \{object\} map\[string\]string "error: Invalid request body" @Failure 500 \{object\} map\[string\]string "error: Failed to update user status"

<a name="AIStat"></a>
## type [AIStat](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/status_handler.go#L14-L23>)



```go
type AIStat struct {
    ID             int       `json:"id"`
    CreatedAt      time.Time `json:"created_at"`
    InputTokens    int       `json:"input_tokens"`
    OutputTokens   int       `json:"output_tokens"`
    TotalTokens    int       `json:"total_tokens"`
    LatencySeconds float32   `json:"latency_seconds"`
    Model          string    `json:"model"`
    Provider       string    `json:"provider"`
}
```

<a name="AnonymousRequest"></a>
## type [AnonymousRequest](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/auth_handler.go#L85-L87>)



```go
type AnonymousRequest struct {
    Code string `json:"code"`
}
```

<a name="CheckUserRequest"></a>
## type [CheckUserRequest](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/auth_handler.go#L134-L139>)



```go
type CheckUserRequest struct {
    Email     string `json:"email"`
    FirstName string `json:"first_name"`
    LastName  string `json:"last_name"`
    UserID    string `json:"id"`
}
```

<a name="ImageUploadResponse"></a>
## type [ImageUploadResponse](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/storage_handler.go#L27-L32>)



```go
type ImageUploadResponse struct {
    Success   bool   `json:"success"`
    ImageURL  string `json:"image_url,omitempty"`
    ImagePath string `json:"image_path,omitempty"`
    Error     string `json:"error,omitempty"`
}
```

<a name="LogUserTypingStatsRequest"></a>
## type [LogUserTypingStatsRequest](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/log_handler.go#L292-L298>)

LogUserTypingStatsRequest represents the request body for logging typing statistics

```go
type LogUserTypingStatsRequest struct {
    TypedNumber               int     `json:"typed_number"`
    AcceptedNumber            int     `json:"accepted_number"`
    SuggestionID              *string `json:"suggestion_id,omitempty"`
    SuggestionLineID          *string `json:"suggestion_line_id,omitempty"`
    SuggestionSelectionItemID *string `json:"suggestion_selection_item_id,omitempty"`
}
```

<a name="RegisterClassRequest"></a>
## type [RegisterClassRequest](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L293-L296>)



```go
type RegisterClassRequest struct {
    ClassID string `json:"classId" binding:"required"`
    UserID  string `json:"userId" binding:"required"`
}
```

<a name="StorageService"></a>
## type [StorageService](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/storage_handler.go#L21-L25>)



```go
type StorageService struct {
    // contains filtered or unexported fields
}
```

<a name="GetStorageService"></a>
### func [GetStorageService](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/storage_handler.go#L60>)

```go
func GetStorageService() *StorageService
```



<a name="StorageService.CreateBucket"></a>
### func \(\*StorageService\) [CreateBucket](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/storage_handler.go#L188>)

```go
func (s *StorageService) CreateBucket(ctx context.Context) error
```

Create storage bucket \(call this once during setup\)

<a name="StorageService.DeleteImage"></a>
### func \(\*StorageService\) [DeleteImage](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/storage_handler.go#L161>)

```go
func (s *StorageService) DeleteImage(ctx context.Context, imagePath string) error
```

Delete image from Supabase Storage using HTTP API

<a name="StorageService.UploadImage"></a>
### func \(\*StorageService\) [UploadImage](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/storage_handler.go#L81>)

```go
func (s *StorageService) UploadImage(ctx context.Context, file multipart.File, header *multipart.FileHeader, userID string) (*ImageUploadResponse, error)
```

Upload image to Supabase Storage using HTTP API

<a name="SuggestionRequest"></a>
## type [SuggestionRequest](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/ai_handler.go#L15-L21>)



```go
type SuggestionRequest struct {
    Prompt   string  `json:"prompt"`
    UserID   string  `json:"userId"`
    HasBug   bool    `json:"hasBug"`
    ClassID  *string `json:"classId,omitempty"`
    Language string  `json:"language"`
}
```

<a name="SupabaseErrorResponse"></a>
## type [SupabaseErrorResponse](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/storage_handler.go#L38-L41>)



```go
type SupabaseErrorResponse struct {
    Error   string `json:"error"`
    Message string `json:"message"`
}
```

<a name="SupabaseStorageResponse"></a>
## type [SupabaseStorageResponse](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/storage_handler.go#L34-L36>)



```go
type SupabaseStorageResponse struct {
    Key string `json:"Key"`
}
```

<a name="UpdateStudentsSettingsRequest"></a>
## type [UpdateStudentsSettingsRequest](<https://github.com/NicholasRucinski/CloverAPIRewrite/blob/main/internal/handlers/class_handler.go#L316-L319>)



```go
type UpdateStudentsSettingsRequest struct {
    StudentIDs []string            `json:"studentIds" binding:"required"`
    Settings   models.UserSettings `json:"settings" binding:"required"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
